{% extends "base.html" %}
{% block content %}
<div class="glass">
    <div class="header">{{ qname|capitalize }}</div>
    <div class="status">Time left: <span id="timer">{{ time_left }}</span></div>
    <div class="status">{{ question_text }}</div>
    <div style="margin-top:1rem;">
        <a href="/key-verify?qname={{ qname }}" style="display:inline-block;padding:0.6rem 1rem;background:#27ae60;color:#fff;border-radius:8px;text-decoration:none;">Enter Mission Key</a>
    </div>
    {% if error %}<div class="status">{{ error }}</div>{% endif %}
    
    <!-- File Missing Modal -->
    <!-- Key verification flow â€” uploads deprecated -->
</div>
<script>
    window.onload = function() {
        var duration = {{ time_left }};
        var display = document.getElementById('timer');
        startTimer(duration, display, function(){
            display.style.background = '#fffbe6';
        }, function(){
            // global timeout callback: navigate to out_of_time
            window.location.href = '/out_of_time';
        });
    };

    // No fullscreen functionality: removed per request.
</script>
{% endblock %}
